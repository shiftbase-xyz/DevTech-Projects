### üìù „ÄÄË®≠ÂÆö„Éï„Ç°„Ç§„É´„ÇíÁ∑®ÈõÜ„Åó„Çà„ÅÜ

„Åì„Åì„Åã„Çâ„ÅØ„Éï„É≠„É≥„Éà„Ç®„É≥„Éâ„ÅÆ‰ΩúÊàê„Å´„Å™„Çä„Åæ„Åô„Åå„ÄÅ„Åæ„Åö„ÅØ„ÄÅÂâçÂõû„ÅÆ„Çª„ÇØ„Ç∑„Éß„É≥„Åæ„Åß„ÅßÂÆåÊàê„Åó„Åü„Çπ„Éû„Éº„Éà„Çπ„Éû„Éº„Éà„Ç≥„É≥„Éà„É©„ÇØ„Éà„Çí„Éá„Éó„É≠„Ç§„Åó„Å¶„ÅÑ„Çã„Ç¢„Ç´„Ç¶„É≥„Éà ID „Åå‰ΩøÁî®„Åï„Çå„Çã„Çà„ÅÜ„Å´„Åó„Åæ„Åô„ÄÇ

`near-hotel-booking-dapp/package.json`„ÅÆ‰∏≠„Åß„ÄÅ„Ç¢„Éó„É™„Ç±„Éº„Ç∑„Éß„É≥„ÇíËµ∑Âãï„Åô„ÇãÈöõ„ÅÆ„Ç≥„Éû„É≥„Éâ„ÇíÁ∑®ÈõÜ„Åó„Åæ„Åô„ÄÇ

`near-hotel-booking-dapp/package.json`

```diff
{
  "name": "hotel-booking-dapp",
  "version": "1.0.0",
  "license": "(MIT AND Apache-2.0)",
  "scripts": {
    "build": "npm run build:contract && npm run build:web",
      "build:contract": "cd contract && rustup target add wasm32-unknown-unknown && cargo build --all --target wasm32-unknown-unknown --release && cp ./target/wasm32-unknown-unknown/release/hotel_booking.wasm ../out/main.wasm",
      "build:web": "parcel build frontend/index.html --public-url ./",
    "deploy": "npm run build:contract && near dev-deploy",
-    "start": "npm run deploy && echo The app is starting! It will automatically open in your browser when ready && env-cmd -f ./neardev/dev-account.env parcel frontend/index.html --open",
+    "start": "echo The app is starting! It will automatically open in your browser when ready && env-cmd -f ./neardev/dev-account.env parcel frontend/index.html --open",
    "dev": "nodemon --watch contract -e ts --exec \"npm run start\"",
    "test": "npm run build:contract && npm run test:unit && npm run test:integration",
      "test:unit": "cd contract && cargo test",
      "test:integration": "npm run test:integration:ts && npm run test:integration:rs",
        "test:integration:ts": "cd integration-tests/ts && npm run test",
        "test:integration:rs": "cd integration-tests/rs && cargo run --example integration-tests"
  },
  ...
}
```

Á∂ö„ÅÑ„Å¶„ÄÅ`near-hotel-booking-dapp/neardev/dev-account.env`ÂÜÖ„ÅÆ`CONTRACT_NAME`„ÇíÊõ∏„ÅçÊèõ„Åà„Åæ„Åô„ÄÇ

`near-hotel-booking-dapp/neardev/dev-account.env`

```
CONTRACT_NAME=YOUR_CONNTRACT_ID
```

‰æã„Åà„Å∞„Åì„ÅÆ„Çà„ÅÜ„Å´„Å™„Çã„Åß„Åó„Çá„ÅÜ„ÄÇ

```
CONTRACT_NAME=contract.hotel_booking.testnet
```

### üîå „Çπ„Éû„Éº„Éà„Ç≥„É≥„Éà„É©„ÇØ„Éà„Å®„ÅÆÊé•Á∂ö„ÇíÂÆüË£Ö„Åó„Çà„ÅÜ

`frontend/assets/js/near/utils.js`„Å´„ÄÅNEAR Wallet „ÅÆ„Éá„Éº„Çø„ÇÑ„Çπ„Éû„Éº„Éà„Ç≥„É≥„Éà„É©„ÇØ„Éà„ÅÆ„É°„ÇΩ„ÉÉ„Éâ„ÇíË®≠ÂÆö„Åô„Çã„Åü„ÇÅ„ÅÆÂÆüË£Ö„ÇíË°å„ÅÑ„Åæ„Åô„ÄÇ‰ª•‰∏ã„ÅÆ„Çà„ÅÜ„Å´Êõ∏„ÅçÊèõ„Åà„Å¶„Åè„Å†„Åï„ÅÑ

`frontend/assets/js/near/utils.js`

```javascript
import { connect, Contract, keyStores, WalletConnection } from "near-api-js";
import {
  formatNearAmount,
  parseNearAmount,
} from "near-api-js/lib/utils/format";
import getConfig from "./config";

// „Éà„É©„É≥„Ç∂„ÇØ„Ç∑„Éß„É≥ÂÆüË°åÊôÇ„Å´‰ΩøÁî®„Åô„ÇãGAS„ÅÆ‰∏äÈôê„ÇíË®≠ÂÆö
const GAS = 100000000000000;

const nearConfig = getConfig(process.env.NODE_ENV || "development");

// „Çπ„Éû„Éº„Éà„Ç≥„É≥„Éà„É©„ÇØ„Éà„ÅÆÂàùÊúüÂåñ„Å®„Ç∞„É≠„Éº„Éê„É´Â§âÊï∞„ÇíË®≠ÂÆö
export async function initContract() {
  // NEAR„ÉÜ„Çπ„Éà„Éç„ÉÉ„Éà„Å∏„ÅÆÊé•Á∂ö„ÇíÂàùÊúüÂåñ„Åô„Çã
  const near = await connect(
    Object.assign(
      { deps: { keyStore: new keyStores.BrowserLocalStorageKeyStore() } },
      nearConfig
    )
  );

  // „Ç¶„Ç©„É¨„ÉÉ„Éà„Éô„Éº„Çπ„ÅÆ„Ç¢„Ç´„Ç¶„É≥„Éà„ÇíÂàùÊúüÂåñ
  // `https://wallet.testnet.near.org`„Åß„Éõ„Çπ„Éà„Åï„Çå„Å¶„ÅÑ„Çã NEAR testnet „Ç¶„Ç©„É¨„ÉÉ„Éà„ÅßÂãï‰Ωú„Åï„Åõ„Çã„Åì„Å®„Åå„Åß„Åç„Çã
  window.walletConnection = new WalletConnection(near);

  // „Ç¢„Ç´„Ç¶„É≥„ÉàID„ÇíÂèñÂæó„Åô„Çã
  // „Åæ„Å†Êú™ÊâøË™ç„ÅÆÂ†¥Âêà„ÅØ„ÄÅÁ©∫ÊñáÂ≠óÂàó„ÅåË®≠ÂÆö„Åï„Çå„Çã
  window.accountId = window.walletConnection.getAccountId();

  // „Çπ„Éû„Éº„Éà„Ç≥„É≥„Éà„É©„ÇØ„ÉàAPI„ÅÆÂàùÊúüÂåñ
  window.contract = await new Contract(
    window.walletConnection.account(),
    nearConfig.contractName,
    {
      viewMethods: [
        "get_available_rooms",
        "get_rooms_registered_by_owner",
        "get_booking_info_for_owner",
        "get_booking_info_for_guest",
        "exists",
        "is_available",
      ],
      changeMethods: [
        "add_room_to_owner",
        "book_room",
        "change_status_to_available",
        "change_status_to_stay",
      ],
    }
  );
}

export function logout() {
  window.walletConnection.signOut();
  // ÁîªÈù¢„Çí„É™„É≠„Éº„Éâ
  window.location.replace(window.location.origin + window.location.pathname);
}

export function login() {
  window.walletConnection.requestSignIn(nearConfig.contractName);
}

export async function accountBalance() {
  return formatNearAmount(
    (await window.walletConnection.account().getAccountBalance()).total,
    2
  );
}

// „Ç≥„Éº„É´„Åô„Çã„É°„ÇΩ„ÉÉ„Éâ„ÅÆÂá¶ÁêÜ„ÇíÂÆöÁæ©
// ÂÆüÈöõ„Å´ÂºïÊï∞„ÇíÊ∏°„ÅôÂá¶ÁêÜ„ÅØÂÖ®„Å¶„Åì„Åì„Å´ÂÆüË£Ö
export async function get_available_rooms(check_in_date) {
  let availableRooms = await window.contract.get_available_rooms({
    check_in_date: check_in_date,
  });
  return availableRooms;
}

export async function get_rooms_registered_by_owner(owner_id) {
  let registeredRooms = await window.contract.get_rooms_registered_by_owner({
    owner_id: owner_id,
  });
  return registeredRooms;
}

export async function get_booking_info_for_owner(owner_id) {
  let bookedRooms = await window.contract.get_booking_info_for_owner({
    owner_id: owner_id,
  });
  return bookedRooms;
}

export async function get_booking_info_for_guest(guest_id) {
  let guestBookedRooms = await window.contract.get_booking_info_for_guest({
    guest_id: guest_id,
  });
  return guestBookedRooms;
}

export async function exists(owner_id, room_name) {
  let ret = await window.contract.exists({
    owner_id: owner_id,
    room_name: room_name,
  });
  return ret;
}

export async function is_available(room_id) {
  let ret = await window.contract.is_available({
    room_id: room_id,
  });
  return ret;
}

export async function add_room_to_owner(room) {
  // NEAR -> yoctoNEAR„Å´Â§âÊèõ
  room.price = parseNearAmount(room.price);

  await window.contract.add_room_to_owner({
    name: room.name,
    image: room.image,
    beds: Number(room.beds),
    description: room.description,
    location: room.location,
    price: room.price,
  });
}

export async function book_room({ room_id, date, price }) {
  await window.contract.book_room(
    {
      room_id: room_id,
      check_in_date: date,
    },
    GAS,
    price
  );
}

export async function change_status_to_available(
  room_id,
  check_in_date,
  guest_id
) {
  await window.contract.change_status_to_available({
    room_id: room_id,
    check_in_date: check_in_date,
    guest_id: guest_id,
  });
}

export async function change_status_to_stay(room_id, check_in_date) {
  await window.contract.change_status_to_stay({
    room_id: room_id,
    check_in_date: check_in_date,
  });
}
```

ÊúÄÂàù„Å´„ÄÅ`near-api-js`„Åã„Çâ„Ç§„É≥„Éù„Éº„Éà„Çí„Åó„Å¶„ÅÑ„Åæ„Åô„ÄÇ

```javascript
import { connect, Contract, keyStores, WalletConnection } from "near-api-js";
import {
  formatNearAmount,
  parseNearAmount,
} from "near-api-js/lib/utils/format";
```

NEAR „Éà„É©„É≥„Ç∂„ÇØ„Ç∑„Éß„É≥„ÅÆÂÜÖÈÉ®„ÅßÊâ±„ÅÜÂçò‰Ωç„Å®„ÄÅ‰∫∫„ÅåÊâ±„ÅÜÂçò‰Ωç„ÅÆÂ§âÊèõ„ÅØ[„Åì„Å°„Çâ„ÅÆÈñ¢Êï∞](https://docs.near.org/tools/near-api-js/utils)„ÅßÂÆüË°å„Åß„Åç„Åæ„Åô„ÄÇ

- `formatNearAmount()` : YoctoNEAR => NEAR
- `parseNearAmount()` : NEAR => yoctoNEAR

Ê¨°„Å´„ÄÅÂêÑÂÆöÊï∞„ÅÆË®≠ÂÆö„Å®ÂàùÊúüÂåñ„ÇíË°å„Å™„Å£„Å¶„ÅÑ„Åæ„Åô„ÄÇ

‰ª•‰∏ã„ÅÆÈÉ®ÂàÜ„Å´Ê≥®ÁõÆ„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ
„Çπ„Éû„Éº„Éà„Ç≥„É≥„Éà„É©„ÇØ„Éà„Åã„ÇâÂëº„Å≥Âá∫„Åó„Åü„ÅÑ„É°„ÇΩ„ÉÉ„Éâ„ÅØ„ÄÅ„Åì„ÅÆ„Çà„ÅÜ„Å´ÂÆöÁæ©„Åó„Åæ„Åô„ÄÇ

```javascript
// „Çπ„Éû„Éº„Éà„Ç≥„É≥„Éà„É©„ÇØ„ÉàAPI„ÅÆÂàùÊúüÂåñ
window.contract = await new Contract(
  window.walletConnection.account(),
  nearConfig.contractName,
  {
    viewMethods: [
      "get_available_rooms",
      "get_rooms_registered_by_owner",
      "get_booking_info_for_owner",
      "get_booking_info_for_guest",
      "exists",
      "is_available",
    ],
    changeMethods: [
      "add_room_to_owner",
      "book_room",
      "change_status_to_available",
      "change_status_to_stay",
    ],
  }
);
```

- `viewMethods` : „Éñ„É≠„ÉÉ„ÇØ„ÉÅ„Çß„Éº„É≥‰∏ä„ÅÆ„Éá„Éº„Çø„ÇíË™≠„ÅøËæº„ÇÄ„É°„ÇΩ„ÉÉ„ÉâÔºà„Ç¨„Çπ‰ª£„ÅØÁÑ°ÊñôÔºâ
- `changeMethods` : „Éñ„É≠„ÉÉ„ÇØ„ÉÅ„Çß„Éº„É≥‰∏ä„Å´„Éá„Éº„Çø„ÇíÊõ∏„ÅçËæº„ÇÄ„É°„ÇΩ„ÉÉ„ÉâÔºà„Ç¨„Çπ‰ª£„ÅåÂøÖË¶ÅÔºâ

Ê¨°„Å´„ÄÅ‰ΩøÁî®„Åô„Çã„É°„ÇΩ„ÉÉ„Éâ„ÅÆÂá¶ÁêÜ„ÇíÂÆöÁæ©„Åó `export` „Åó„Åæ„Åô„ÄÇ

```javascript
// „Ç≥„Éº„É´„Åô„Çã„É°„ÇΩ„ÉÉ„Éâ„ÅÆÂá¶ÁêÜ„ÇíÂÆöÁæ©
// ÂÆüÈöõ„Å´ÂºïÊï∞„ÇíÊ∏°„ÅôÂá¶ÁêÜ„ÅØÂÖ®„Å¶„Åì„Åì„Å´ÂÆüË£Ö
export async function get_available_rooms(searchDate) {
  let availableRooms = await window.contract.get_available_rooms({
    check_in_date: searchDate,
  });
  return availableRooms;
}

export async function get_rooms_registered_by_owner(owner_id) {
  let registeredRooms = await window.contract.get_rooms_registered_by_owner({
    owner_id: owner_id,
  });
  return registeredRooms;
}

export async function get_booking_info_for_owner(owner_id) {
  let bookedRooms = await window.contract.get_booking_info_for_owner({
    owner_id: owner_id,
  });
  return bookedRooms;
}

export async function get_booking_info_for_guest(guest_id) {
  let guestBookedRooms = await window.contract.get_booking_info_for_guest({
    guest_id: guest_id,
  });
  return guestBookedRooms;
}

export async function exists(owner_id, room_name) {
  let ret = await window.contract.exists({
    owner_id: owner_id,
    room_name: room_name,
  });
  return ret;
}

export async function is_available(room_id) {
  let ret = await window.contract.is_available({
    room_id: room_id,
  });
  return ret;
}

export async function add_room_to_owner(room) {
  // NEAR -> yoctoNEAR„Å´Â§âÊèõ
  room.price = parseNearAmount(room.price);

  await window.contract.add_room_to_owner({
    name: room.name,
    image: room.image,
    beds: Number(room.beds),
    description: room.description,
    location: room.location,
    price: room.price,
  });
}

export async function book_room({ room_id, date, price }) {
  await window.contract.book_room(
    {
      room_id: room_id,
      check_in_date: date,
    },
    GAS,
    price
  );
}

export async function change_status_to_available(
  room_id,
  check_in_date,
  guest_id
) {
  await window.contract.change_status_to_available({
    room_id: room_id,
    check_in_date: check_in_date,
    guest_id: guest_id,
  });
}

export async function change_status_to_stay(room_id, check_in_date) {
  await window.contract.change_status_to_stay({
    room_id: room_id,
    check_in_date: check_in_date,
  });
}
```

„Éà„Éº„ÇØ„É≥„ÅÆËª¢ÈÄÅÂá¶ÁêÜ„ÅåË°å„Çè„Çå„Çã`book_room`„É°„ÇΩ„ÉÉ„Éâ„Å´„ÅØ„ÄÅÁ¨¨‰∫åÂºïÊï∞„Å´„Ç¨„Çπ„ÅÆ‰∏äÈôê„ÄÅÁ¨¨‰∏âÂºïÊï∞„Å´ÈáèÔºà„Åì„Åì„Åß„ÅØÂÆøÊ≥äÊñôÔºâ„ÇíÊåáÂÆö„Åó„Åæ„Åô„ÄÇ

```javascript
await window.contract.book_room(
  {
    room_id: room_id,
    check_in_date: date,
  },
  GAS,
  price
);
```

„Åì„Çå„Åß„ÄÅ„Çπ„Éû„Éº„Éà„Ç≥„É≥„Éà„É©„ÇØ„Éà„ÅÆ„É°„ÇΩ„ÉÉ„Éâ„ÇíÂëº„Å≥Âá∫„ÅôÊ∫ñÂÇô„Åå„Åß„Åç„Åæ„Åó„Åü„ÄÇ

### üôã‚Äç‚ôÇÔ∏è Ë≥™Âïè„Åô„Çã

„Åì„Åì„Åæ„Åß„ÅÆ‰ΩúÊ•≠„Åß‰Ωï„Åã„Çè„Åã„Çâ„Å™„ÅÑ„Åì„Å®„Åå„ÅÇ„ÇãÂ†¥Âêà„ÅØ„ÄÅDiscord „ÅÆ `#section-3` „ÅßË≥™Âïè„Çí„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ

„Éò„É´„Éó„Çí„Åô„Çã„Å®„Åç„ÅÆ„Éï„É≠„Éº„ÅåÂÜÜÊªë„Å´„Å™„Çã„ÅÆ„Åß„ÄÅ„Ç®„É©„Éº„É¨„Éù„Éº„Éà„Å´„ÅØ‰∏ãË®ò„ÅÆ 4 ÁÇπ„ÇíË®òËºâ„Åó„Å¶„Åè„Å†„Åï„ÅÑ ‚ú®

```
1. Ë≥™Âïè„ÅåÈñ¢ÈÄ£„Åó„Å¶„ÅÑ„Çã„Çª„ÇØ„Ç∑„Éß„É≥Áï™Âè∑„Å®„É¨„ÉÉ„Çπ„É≥Áï™Âè∑
2. ‰Ωï„Çí„Åó„Çà„ÅÜ„Å®„Åó„Å¶„ÅÑ„Åü„Åã
3. „Ç®„É©„ÉºÊñá„Çí„Ç≥„Éî„Éº&„Éö„Éº„Çπ„Éà
4. „Ç®„É©„ÉºÁîªÈù¢„ÅÆ„Çπ„ÇØ„É™„Éº„É≥„Ç∑„Éß„ÉÉ„Éà
```

---

Ê¨°„ÅÆ„É¨„ÉÉ„Çπ„É≥„Å´ÈÄ≤„Åø„ÄÅÁîªÈù¢ÈÅ∑Áßª„ÇíÂÆüË£Ö„Åó„Å¶„Åç„Åæ„Åó„Çá„ÅÜÔºÅ
